## Задание

1. Реализовать программу согласно варианту задания. Базовый алгоритм, используемый в программе, необходимо реализовать
в 3 вариантах: с использованием встроенных функций какой-либо библиотеки (OpenCV, PIL и др.) и нативно на Python +
|с использованием Numba или C++|.
2. Сравнить быстродействие реализованных вариантов.

#### Примечание

Программа работает с видео. На вход должен поступать видеопоток с устройства (камеры) или видео должно читаться из
файла. Каждый алгоритм нужно реализовать в 3 вариантах: с использованием сторонних библиотек на Python, с помощью
примитивных операций и циклов на Python (можно использовать NumPy массивы) и с помощью компилируемого кода (на C++ либо
с использованием, например, Numba на Python). Если указано, что выходное изображение переключается между черно-белым и
после обработки, это значит, что на вход обработки подается черно-белое изображение.

#### Вариант 5

Медианный фильтр. На вход поступает изображение, программа отрисовывает окно, в которое выводится либо исходное
изображение после преобразования в черно-белое, либо после медианного фильтра (переключение по нажатию клавиши) -
размер ядра должен задаваться как параметр, в отчёте должно быть приложено исследование зависимости производительности
от размера ядра.

## Теория

Медианная фильтрация реализуется в виде процедуры локальной обработки отсчетов в скользящем окне, которое включает
определенное число отсчетов сигнала. Для каждого положения окна выделенные в нем отсчеты ранжируются по возрастанию
или убыванию значений. Средний по своему положению отчет в ранжированном списке называется медианой рассматриваемой
группы отсчетов. Этим отсчетом заменяется центральный отсчет в окне для обрабатываемого сигнала. В силу этого медианный
фильтр относится к числу нелинейных фильтров, заменяющим медианным значением аномальные точки и выбросы независимо от
их амплитудных значений, и является устойчивым по определению, способным аннулировать даже бесконечно большие отсчеты.

## Реализация

Для сравнения быстродействия алгоритмов было записано видео размера 640x360 пикселей и продолжительностью 3 секунды.
Считывание видео и разбиение его по кадрам производиться с помощью библиотеки OpenCV. Для каждого кадра мы применяем
одну из трёх реализаций медианного фильтра:
1.	Реализация из библиотеки OpenCV
2.	Нативная реализация на Python
3.	Нативная реализация на Python с использованием библиотеки Numba

В процессе обработки видео рассчитывается среднее время обработки кадра, а также общее время процессинга видео.

Рассмотрим результаты работы программы:

![Alt text](images/opencv.jpg?raw=true "Кадр обработан с помощью OpenCV")

_Рисунок 1. Обработка кадра с помощью OpenCV_ <br /> <br />

![Alt text](images/default_scratch.jpg?raw=true "Кадр обработан с помощью нативного алгоритма")

_Рисунок 2. Обработка кадра с помощью нативного алгоритма_ <br /> <br />

![Alt text](images/jit_scratch.jpg?raw=true "Кадр обработан с помощью нативного алгоритма при использовании Numba")

_Рисунок 3. Обработка кадра с помощью нативного алгоритма при использовании Numba_ <br />


Время работы алгоритмов:

| Алгоритм        | Время работы с ядром=3 | Время работы с ядром=5 | Время работы с ядром=7 | Обработка кадра с ядром=3 | Обработка кадра с ядром=5 | Обработка кадра с ядром=7 |
| --------------- | ---------------------- | ---------------------- | ---------------------- | ------------------------- | ------------------------- | ------------------------- |
| OpenCV          | 0.047192               | 0.14383                | 0.69197                | 0.000858                  | 0.002615                  | 0.01258                   |
| Нативная        | 140.8417               | 289.61                 | 360.7757               | 2.5607                    | 5.2656                    | 6.56                      |
| Нативная с Numba| 17.6657                | 26.1216                | 34.09                  | 0.3212                    | 0.4749                    | 0.6198                    |

## Выводы

В результате проделанной работы было применено три реализации медианного фильтра к видео. Наиболее быстрой оказалась
реализация фильтра из библиотеки Opencv. Использование библиотеки Numba для предварительной компиляции функции смогло
значительно ускорить получение результата нативного алгоритма, однако всё равно занимает значительное время по сравнению
с OpenCV.

Результаты работы каждого алгоритма сопоставимы по качеству.
